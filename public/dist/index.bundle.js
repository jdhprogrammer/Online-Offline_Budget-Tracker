(()=>{let a=[];function e(){let e=a.reduce(((a,e)=>a+parseInt(e.value)),0);document.querySelector("#total").textContent=e}function t(){let e=document.querySelector("#tbody");e.innerHTML="",a.forEach((a=>{let t=parseInt(a.value),r=document.createElement("tr");parseInt(t)<0?(r.className="neg",r.innerHTML=`\n          <td class="negTd">${a.name}</td>\n          <td class="negTd">${a.value}</td>\n        `):parseInt(t)>0?(r.className="pos",r.innerHTML=`\n      <td class="posTd">${a.name}</td>\n      <td class="posTd">${a.value}</td>\n    `):(r.ClassName="neut",r.innerHTML=`\n    <td class="neutTd">${a.name}</td>\n    <td class="neutTd">${a.value}</td>\n    `),e.appendChild(r)}))}function r(r){let s=document.querySelector("#t-name"),o=document.querySelector("#t-amount"),l=document.querySelector(".form .error");if(""===s.value||""===o.value)return void(l.textContent="Missing Information");l.textContent="";let b={name:s.value,value:o.value,date:(new Date).toISOString()};r||(b.value*=-1),a.unshift(b),t(),e(),n(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(b),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((a=>a.json())).then((a=>{a.errors?l.textContent="Missing Information":(s.value="",o.value="")})).catch((a=>{saveRecord(b),s.value="",o.value=""}))}function n(){let e=[],t=[],r=[],n=[],s=[],o=[],l=[],b=[];const g=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226"];a.forEach((a=>{let g=parseInt(a.value),d=a.name;parseInt(g)<0?(r.push(d),n.push(g),l.push(d),b.push(g)):parseInt(g)>0?(e.push(d),t.push(g),l.push(d),b.push(g)):(s.push(d),o.push(g),l.push(d),b.push(g))}));let d=document.querySelector("#canvas1").getContext("2d"),c=document.querySelector("#canvas2").getContext("2d"),u=document.querySelector("#canvas3").getContext("2d"),i=document.querySelector("#canvas4").getContext("2d"),p=a.slice().reverse(),h=0,m=p.map((a=>{let e=new Date(a.date);return`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`})),f=p.map((a=>(h+=parseInt(a.value),h)));new Chart(d,{type:"line",data:{labels:m,datasets:[{label:"Budget Balance",backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,fill:!1,data:f}]},options:{responsive:!0,title:{display:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0}}],yAxes:[{display:!0,scaleLabel:{display:!0}}]}}}),new Chart(c,{type:"bar",data:{labels:l,datasets:[{label:"Transactions",data:b,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"Expenses Paid"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(u,{type:"pie",data:{labels:e,datasets:[{label:"Income Earned",backgroundColor:g,data:t}]},options:{title:{display:!0,text:"Income Earned"}}}),new Chart(i,{type:"doughnut",data:{labels:r,datasets:[{label:"Expenses Paid",backgroundColor:g,data:n}]},options:{title:{display:!0,text:"Expenses Paid"}}})}fetch("/api/transaction").then((a=>a.json())).then((r=>{a=r,e(),t(),n()})),document.querySelector("#add-btn").onclick=function(){r(!0)},document.querySelector("#sub-btn").onclick=function(){r(!1)},n()})();