(()=>{let e,t=[];function a(){let e=t.reduce(((e,t)=>e+parseInt(t.value)),0);document.querySelector("#total").textContent=e}function n(){let e=document.querySelector("#tbody");e.innerHTML="",t.forEach((t=>{let a=parseInt(t.value),n=document.createElement("tr");parseInt(a)<0?(n.className="neg",n.innerHTML=`\n          <td class="negTd">${t.name}</td>\n          <td class="negTd">${t.value}</td>\n        `):parseInt(a)>0?(n.className="pos",n.innerHTML=`\n      <td class="posTd">${t.name}</td>\n      <td class="posTd">${t.value}</td>\n    `):(n.ClassName="neut",n.innerHTML=`\n    <td class="neutTd">${t.name}</td>\n    <td class="neutTd">${t.value}</td>\n    `),e.appendChild(n)}))}function r(){let a=t.slice().reverse(),n=0,r=a.map((e=>{let t=new Date(e.date);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`})),l=a.map((e=>(n+=parseInt(e.value),n)));e&&e.destroy();let o=document.getElementById("myChart").getContext("2d");e=new Chart(o,{type:"line",data:{labels:r,datasets:[{label:"Total Over Time",fill:!0,backgroundColor:"#6666ff",data:l}]}})}function l(e){let l=document.querySelector("#t-name"),s=document.querySelector("#t-amount"),d=document.querySelector(".form .error");if(""===l.value||""===s.value)return void(d.textContent="Missing Information");d.textContent="";let c={name:l.value,value:s.value,date:(new Date).toISOString()};e||(c.value*=-1),t.unshift(c),r(),n(),a(),o(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(c),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.errors?d.textContent="Missing Information":(l.value="",s.value="")})).catch((e=>{saveRecord(c),l.value="",s.value=""}))}function o(){t.reduce(((e,t)=>e+parseInt(t.value)),0);let e=[],a=[],n=[],r=[],l=[],o=[];const s=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226"];t.forEach((t=>{let s=parseInt(t.value),d=t.name;parseInt(s)<0?(n.push(d),r.push(s)):parseInt(s)>0?(e.push(d),a.push(s)):(l.push(d),o.push(s))}));let d=document.querySelector("#canvas1").getContext("2d"),c=document.querySelector("#canvas2").getContext("2d"),u=document.querySelector("#canvas3").getContext("2d"),i=document.querySelector("#canvas4").getContext("2d"),b=t.slice().reverse(),g=0,p=b.map((e=>{let t=new Date(e.date);return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`})),m=b.map((e=>(g+=parseInt(e.value),g)));new Chart(d,{type:"line",data:{dateLabels:p,datasets:[{label:"Budget Balance",backgroundColor:"limegreen",borderColor:"limegreen",data:m,fill:!1}]},options:{responsive:!0,title:{display:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0}}],yAxes:[{display:!0,scaleLabel:{display:!0}}]}}}),new Chart(c,{type:"bar",data:{dateLabels:p,datasets:[{label:"Expenses",data:r,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"Expenses Paid"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(u,{type:"pie",data:{labels:e,datasets:[{label:"Income Earned",backgroundColor:s,data:a}]},options:{title:{display:!0,text:"Income Earned"}}}),new Chart(i,{type:"doughnut",data:{labels:n,datasets:[{label:"Expenses Paid",backgroundColor:s,data:r}]},options:{title:{display:!0,text:"Expenses Paid"}}})}fetch("/api/transaction").then((e=>e.json())).then((e=>{t=e,a(),n(),r(),o()})),document.querySelector("#add-btn").onclick=function(){l(!0)},document.querySelector("#sub-btn").onclick=function(){l(!1)},o()})();