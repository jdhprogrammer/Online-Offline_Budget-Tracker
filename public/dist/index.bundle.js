(()=>{let a=[];function r(){let r=a.reduce(((a,r)=>a+parseInt(r.value)),0);document.querySelector("#total").textContent=r}function e(){let r=document.querySelector("#tbody");r.innerHTML="",a.forEach((a=>{let e=parseInt(a.value),t=document.createElement("tr");parseInt(e)<0?(t.className="neg",t.innerHTML=`\n          <td class="negTd">${a.name}</td>\n          <td class="negTd">${a.value}</td>\n        `):parseInt(e)>0?(t.className="pos",t.innerHTML=`\n      <td class="posTd">${a.name}</td>\n      <td class="posTd">${a.value}</td>\n    `):(t.ClassName="neut",t.innerHTML=`\n    <td class="neutTd">${a.name}</td>\n    <td class="neutTd">${a.value}</td>\n    `),r.appendChild(t)}))}function t(t){let g=document.querySelector("#t-name"),n=document.querySelector("#t-amount"),s=document.querySelector(".form .error");if(""===g.value||""===n.value)return void(s.textContent="Missing Information");s.textContent="";let l={name:g.value,value:n.value,date:(new Date).toISOString()};t||(l.value*=-1),a.unshift(l),e(),r(),b(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(l),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((a=>a.json())).then((a=>{a.errors?s.textContent="Missing Information":(g.value="",n.value="")})).catch((a=>{saveRecord(l),g.value="",n.value=""}))}function b(){let r=[],e=[],t=[],b=[],g=[],n=[],s=[],l=[];const o=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226","#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226","#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226","#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#f4ab2e","#eeca14","#fbfb5f","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#000226"];a.forEach((a=>{let o=parseInt(a.value),d=a.name;parseInt(o)<0?(t.push(d),b.push(o),s.push(d),l.push(o)):parseInt(o)>0?(r.push(d),e.push(o),s.push(d),l.push(o)):(g.push(d),n.push(o),s.push(d),l.push(o))}));let d=document.querySelector("#canvas1").getContext("2d"),c=document.querySelector("#canvas2").getContext("2d"),u=document.querySelector("#canvas3").getContext("2d"),f=document.querySelector("#canvas4").getContext("2d"),i=a.slice().reverse(),p=0,h=i.map((a=>{let r=new Date(a.date);return`${r.getMonth()+1}/${r.getDate()}/${r.getFullYear()}`})),m=i.map((a=>(p+=parseInt(a.value),p)));new Chart(d,{type:"line",data:{labels:h,datasets:[{label:"Budget Balance",backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,fill:!1,data:m}]},options:{responsive:!0,title:{display:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0}}],yAxes:[{display:!0,scaleLabel:{display:!0}}]}}}),new Chart(c,{type:"bar",data:{labels:s,datasets:[{label:"Transactions",data:l,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"All Budget Items"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),new Chart(u,{type:"pie",data:{labels:r,datasets:[{label:"Income Earned",backgroundColor:o,data:e}]},options:{title:{display:!0,text:"Income Earned"}}}),new Chart(f,{type:"doughnut",data:{labels:t,datasets:[{label:"Expenses Paid",backgroundColor:o,data:b}]},options:{title:{display:!0,text:"Expenses Paid"}}})}fetch("/api/transaction").then((a=>a.json())).then((t=>{a=t,r(),e(),b()})),document.querySelector("#add-btn").onclick=function(){t(!0)},document.querySelector("#sub-btn").onclick=function(){t(!1)},b()})();